<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class ActionView::TestCase - minitest-rails</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
  var index_rel_prefix = "../";
</script>

<script src="../js/navigation.js" defer></script>
<script src="../js/search.js" defer></script>
<script src="../js/search_index.js" defer></script>
<script src="../js/searcher.js" defer></script>
<script src="../js/darkfish.js" defer></script>

<link href="../css/fonts.css" rel="stylesheet">
<link href="../css/rdoc.css" rel="stylesheet">


<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../table_of_contents.html#pages">Pages</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    
<div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  <p class="link">Object
</div>

    
    
    
<!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    <li ><a href="#method-i-assert_difference">#assert_difference</a>
    <li ><a href="#method-i-assert_dom_equal">#assert_dom_equal</a>
    <li ><a href="#method-i-assert_dom_not_equal">#assert_dom_not_equal</a>
    <li ><a href="#method-i-assert_generates">#assert_generates</a>
    <li ><a href="#method-i-assert_no_difference">#assert_no_difference</a>
    <li ><a href="#method-i-assert_recognizes">#assert_recognizes</a>
    <li ><a href="#method-i-assert_redirected_to">#assert_redirected_to</a>
    <li ><a href="#method-i-assert_response">#assert_response</a>
    <li ><a href="#method-i-assert_routing">#assert_routing</a>
    <li ><a href="#method-i-assert_select">#assert_select</a>
    <li ><a href="#method-i-assert_select_email">#assert_select_email</a>
    <li ><a href="#method-i-assert_select_encoded">#assert_select_encoded</a>
    <li ><a href="#method-i-refute_difference">#refute_difference</a>
    <li ><a href="#method-i-refute_dom_equal">#refute_dom_equal</a>
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-ActionView::TestCase">
  <h1 id="class-ActionView::TestCase" class="class">
    class ActionView::TestCase
  </h1>

  <section class="description">
    
  </section>

  <section id="5Buntitled-5D" class="documentation-section">





     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

      <div id="method-i-assert_difference" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              assert_difference(expression, difference = 1, message = nil, &amp;block)
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Checks the numeric difference between the return value of an expression as a result of what is evaluated.</p>

<pre class="ruby"><span class="ruby-identifier">assert_difference</span> <span class="ruby-string">&quot;User.count&quot;</span>, <span class="ruby-value">+1</span> <span class="ruby-keyword">do</span>
  <span class="ruby-constant">User</span>.<span class="ruby-identifier">create</span>
<span class="ruby-keyword">end</span>
</pre>

<p>See also Minitest::Rails::Expectations#must_change</p>

          <div class="method-source-code" id="assert_difference-source">
            <pre><span class="ruby-comment"># File lib/minitest/rails/assertions/action_view.rb, line 11</span>
  </pre>
          </div>
        </div>


      </div>

      <div id="method-i-assert_dom_equal" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              assert_dom_equal(expected, actual, message = nil)
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Checks that two HTML strings are equivalent. That they contain the same elements and attributes with the associated values.</p>

<pre class="ruby"><span class="ruby-identifier">assert_dom_equal</span> <span class="ruby-string">&#39;&lt;a href=&quot;http://www.example.com&quot;&gt;Apples&lt;/a&gt;&#39;</span>,
                 <span class="ruby-identifier">link_to</span>(<span class="ruby-string">&quot;Apples&quot;</span>, <span class="ruby-string">&quot;http://www.example.com&quot;</span>)
</pre>

<p>See also Minitest::Rails::Expectations#must_dom_equal</p>

          <div class="method-source-code" id="assert_dom_equal-source">
            <pre><span class="ruby-comment"># File lib/minitest/rails/assertions/action_view.rb, line 331</span>
  </pre>
          </div>
        </div>


      </div>

      <div id="method-i-assert_dom_not_equal" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              assert_dom_not_equal(expected, actual, message = nil)
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Checks that two HTML strings are not equivalent. That they do not contain the same elements and attributes with the associated values.</p>

<pre class="ruby"><span class="ruby-identifier">assert_dom_not_equal</span> <span class="ruby-string">&#39;&lt;a href=&quot;http://www.example.com&quot;&gt;Oranges&lt;/a&gt;&#39;</span>,
                     <span class="ruby-identifier">link_to</span>(<span class="ruby-string">&quot;Apples&quot;</span>, <span class="ruby-string">&quot;http://www.example.com&quot;</span>)
</pre>

<p>See also Minitest::Rails::Expectations#wont_dom_equal</p>

          <div class="method-source-code" id="assert_dom_not_equal-source">
            <pre><span class="ruby-comment"># File lib/minitest/rails/assertions/action_view.rb, line 342</span>
  </pre>
          </div>
        </div>

        <div class="aliases">
          Also aliased as: <a href="TestCase.html#method-i-refute_dom_equal">refute_dom_equal</a>
        </div>

      </div>

      <div id="method-i-assert_generates" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              assert_generates(expected_path, options, defaults={}, extras = {}, message=nil)
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Asserts that the provided options can be used to generate the provided path. This is the inverse of <code>assert_recognizes</code>. The <code>extras</code> parameter is used to tell the request the names and values of additional request parameters that would be in a query string. The <code>message</code> parameter allows you to specify a custom error message for assertion failures.</p>

<p>The <code>defaults</code> parameter is unused.</p>

<pre class="ruby"><span class="ruby-comment"># Asserts that the default action is generated for a route with no action</span>
<span class="ruby-identifier">assert_generates</span> <span class="ruby-string">&quot;/items&quot;</span>, <span class="ruby-value">controller:</span> <span class="ruby-string">&quot;items&quot;</span>, <span class="ruby-value">action:</span> <span class="ruby-string">&quot;index&quot;</span>

<span class="ruby-comment"># Tests that the list action is properly routed</span>
<span class="ruby-identifier">assert_generates</span> <span class="ruby-string">&quot;/items/list&quot;</span>, <span class="ruby-value">controller:</span> <span class="ruby-string">&quot;items&quot;</span>, <span class="ruby-value">action:</span> <span class="ruby-string">&quot;list&quot;</span>

<span class="ruby-comment"># Tests the generation of a route with a parameter</span>
<span class="ruby-identifier">assert_generates</span> <span class="ruby-string">&quot;/items/list/1&quot;</span>, { <span class="ruby-value">controller:</span> <span class="ruby-string">&quot;items&quot;</span>, <span class="ruby-value">action:</span> <span class="ruby-string">&quot;list&quot;</span>, <span class="ruby-value">id:</span> <span class="ruby-string">&quot;1&quot;</span> }

<span class="ruby-comment"># Asserts that the generated route gives us our custom route</span>
<span class="ruby-identifier">assert_generates</span> <span class="ruby-string">&quot;changesets/12&quot;</span>, { <span class="ruby-value">controller:</span> <span class="ruby-string">&#39;scm&#39;</span>, <span class="ruby-value">action:</span> <span class="ruby-string">&#39;show_diff&#39;</span>, <span class="ruby-value">revision:</span> <span class="ruby-string">&quot;12&quot;</span> }
</pre>

<p>See also Minitest::Rails::Expectations#must_route_to</p>

          <div class="method-source-code" id="assert_generates-source">
            <pre><span class="ruby-comment"># File lib/minitest/rails/assertions/action_view.rb, line 103</span>
  </pre>
          </div>
        </div>


      </div>

      <div id="method-i-assert_no_difference" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              assert_no_difference(expression, message = nil, &amp;block)
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Checks that the numeric result of evaluating an expression is not changed before and after invoking.</p>

<pre class="ruby"><span class="ruby-identifier">assert_no_difference</span> <span class="ruby-string">&quot;User.count&quot;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-constant">User</span>.<span class="ruby-identifier">new</span>
<span class="ruby-keyword">end</span>
</pre>

<p>See also Minitest::Rails::Expectations#wont_change</p>

          <div class="method-source-code" id="assert_no_difference-source">
            <pre><span class="ruby-comment"># File lib/minitest/rails/assertions/action_view.rb, line 23</span>
  </pre>
          </div>
        </div>

        <div class="aliases">
          Also aliased as: <a href="TestCase.html#method-i-refute_difference">refute_difference</a>
        </div>

      </div>

      <div id="method-i-assert_recognizes" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              assert_recognizes(expected_options, path, extras={}, msg=nil)
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Asserts that the routing of the given <code>path</code> was handled correctly and that the parsed options (given in the <code>expected_options</code> hash) match <code>path</code>. Basically, it asserts that Rails recognizes the route given by <code>expected_options</code>.</p>

<p>Pass a hash in the second argument (<code>path</code>) to specify the request method. This is useful for routes requiring a specific HTTP method. The hash should contain a :path with the incoming request path and a :method containing the required HTTP verb.</p>

<pre class="ruby"><span class="ruby-comment"># assert that POSTing to /items will call the create action on ItemsController</span>
<span class="ruby-identifier">assert_recognizes</span>({<span class="ruby-value">controller:</span> <span class="ruby-string">&#39;items&#39;</span>, <span class="ruby-value">action:</span> <span class="ruby-string">&#39;create&#39;</span>}, {<span class="ruby-value">path:</span> <span class="ruby-string">&#39;items&#39;</span>, <span class="ruby-value">method:</span> <span class="ruby-value">:post</span>})
</pre>

<p>You can also pass in <code>extras</code> with a hash containing URL parameters that would normally be in the query string. This can be used to assert that values in the query string string will end up in the params hash correctly. To test query strings you must use the extras argument, appending the query string on the path directly will not work. For example:</p>

<pre class="ruby"><span class="ruby-comment"># assert that a path of &#39;/items/list/1?view=print&#39; returns the correct options</span>
<span class="ruby-identifier">assert_recognizes</span>({<span class="ruby-value">controller:</span> <span class="ruby-string">&#39;items&#39;</span>, <span class="ruby-value">action:</span> <span class="ruby-string">&#39;list&#39;</span>, <span class="ruby-value">id:</span> <span class="ruby-string">&#39;1&#39;</span>, <span class="ruby-value">view:</span> <span class="ruby-string">&#39;print&#39;</span>}, <span class="ruby-string">&#39;items/list/1&#39;</span>, { <span class="ruby-value">view:</span> <span class="ruby-string">&quot;print&quot;</span> })
</pre>

<p>The <code>message</code> parameter allows you to pass in an error message that is displayed upon failure.</p>

<pre class="ruby"><span class="ruby-comment"># Check the default route (i.e., the index action)</span>
<span class="ruby-identifier">assert_recognizes</span>({<span class="ruby-value">controller:</span> <span class="ruby-string">&#39;items&#39;</span>, <span class="ruby-value">action:</span> <span class="ruby-string">&#39;index&#39;</span>}, <span class="ruby-string">&#39;items&#39;</span>)

<span class="ruby-comment"># Test a specific action</span>
<span class="ruby-identifier">assert_recognizes</span>({<span class="ruby-value">controller:</span> <span class="ruby-string">&#39;items&#39;</span>, <span class="ruby-value">action:</span> <span class="ruby-string">&#39;list&#39;</span>}, <span class="ruby-string">&#39;items/list&#39;</span>)

<span class="ruby-comment"># Test an action with a parameter</span>
<span class="ruby-identifier">assert_recognizes</span>({<span class="ruby-value">controller:</span> <span class="ruby-string">&#39;items&#39;</span>, <span class="ruby-value">action:</span> <span class="ruby-string">&#39;destroy&#39;</span>, <span class="ruby-value">id:</span> <span class="ruby-string">&#39;1&#39;</span>}, <span class="ruby-string">&#39;items/destroy/1&#39;</span>)

<span class="ruby-comment"># Test a custom route</span>
<span class="ruby-identifier">assert_recognizes</span>({<span class="ruby-value">controller:</span> <span class="ruby-string">&#39;items&#39;</span>, <span class="ruby-value">action:</span> <span class="ruby-string">&#39;show&#39;</span>, <span class="ruby-value">id:</span> <span class="ruby-string">&#39;1&#39;</span>}, <span class="ruby-string">&#39;view/item1&#39;</span>)
</pre>

<p>See also Minitest::Rails::Expectations#must_route_from</p>

          <div class="method-source-code" id="assert_recognizes-source">
            <pre><span class="ruby-comment"># File lib/minitest/rails/assertions/action_view.rb, line 140</span>
  </pre>
          </div>
        </div>


      </div>

      <div id="method-i-assert_redirected_to" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              assert_redirected_to(options = {}, message=nil)
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Assert that the redirection options passed in match those of the redirect called in the latest action. This match can be partial, such that <code>assert_redirected_to(controller: &quot;weblog&quot;)</code> will also match the redirection of <code>redirect_to(controller: &quot;weblog&quot;, action: &quot;show&quot;)</code> and so on.</p>

<pre class="ruby"><span class="ruby-comment"># assert that the redirection was to the &quot;index&quot; action on the WeblogController</span>
<span class="ruby-identifier">assert_redirected_to</span> <span class="ruby-value">controller:</span> <span class="ruby-string">&quot;weblog&quot;</span>, <span class="ruby-value">action:</span> <span class="ruby-string">&quot;index&quot;</span>

<span class="ruby-comment"># assert that the redirection was to the named route login_url</span>
<span class="ruby-identifier">assert_redirected_to</span> <span class="ruby-identifier">login_url</span>

<span class="ruby-comment"># assert that the redirection was to the url for @customer</span>
<span class="ruby-identifier">assert_redirected_to</span> <span class="ruby-ivar">@customer</span>

<span class="ruby-comment"># asserts that the redirection matches the regular expression</span>
<span class="ruby-identifier">assert_redirected_to</span> <span class="ruby-regexp">%r(\Ahttp://example.org)</span>
</pre>

<p>See also Minitest::Rails::Expectations#must_redirect_to</p>

          <div class="method-source-code" id="assert_redirected_to-source">
            <pre><span class="ruby-comment"># File lib/minitest/rails/assertions/action_view.rb, line 79</span>
  </pre>
          </div>
        </div>


      </div>

      <div id="method-i-assert_response" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              assert_response(type, message = nil)
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Asserts that the response is one of the following types:</p>
<ul><li>
<p><code>:success</code>   - Status code was in the 200-299 range</p>
</li><li>
<p><code>:redirect</code>  - Status code was in the 300-399 range</p>
</li><li>
<p><code>:missing</code>   - Status code was 404</p>
</li><li>
<p><code>:error</code>     - Status code was in the 500-599 range</p>
</li></ul>

<p>You can also pass an explicit status number like <code>assert_response(501)</code> or its symbolic equivalent <code>assert_response(:not_implemented)</code>. See Rack::Utils::SYMBOL_TO_STATUS_CODE for a full list.</p>

<pre class="ruby"><span class="ruby-comment"># assert that the response was a redirection</span>
<span class="ruby-identifier">assert_response</span> <span class="ruby-value">:redirect</span>

<span class="ruby-comment"># assert that the response code was status code 401 (unauthorized)</span>
<span class="ruby-identifier">assert_response</span> <span class="ruby-value">401</span>
</pre>

<p>See also Minitest::Rails::Expectations#must_respond_with</p>

          <div class="method-source-code" id="assert_response-source">
            <pre><span class="ruby-comment"># File lib/minitest/rails/assertions/action_view.rb, line 57</span>
  </pre>
          </div>
        </div>


      </div>

      <div id="method-i-assert_routing" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              assert_routing(path, options, defaults={}, extras={}, message=nil)
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Asserts that path and options match both ways; in other words, it verifies that <code>path</code> generates <code>options</code> and then that <code>options</code> generates <code>path</code>. This essentially combines <code>assert_recognizes</code> and <code>assert_generates</code> into one step.</p>

<p>The <code>extras</code> hash allows you to specify options that would normally be provided as a query string to the action. The <code>message</code> parameter allows you to specify a custom error message to display upon failure.</p>

<pre class="ruby"><span class="ruby-comment"># Assert a basic route: a controller with the default action (index)</span>
<span class="ruby-identifier">assert_routing</span> <span class="ruby-string">&#39;/home&#39;</span>, <span class="ruby-value">controller:</span> <span class="ruby-string">&#39;home&#39;</span>, <span class="ruby-value">action:</span> <span class="ruby-string">&#39;index&#39;</span>

<span class="ruby-comment"># Test a route generated with a specific controller, action, and parameter (id)</span>
<span class="ruby-identifier">assert_routing</span> <span class="ruby-string">&#39;/entries/show/23&#39;</span>, <span class="ruby-value">controller:</span> <span class="ruby-string">&#39;entries&#39;</span>, <span class="ruby-value">action:</span> <span class="ruby-string">&#39;show&#39;</span>, <span class="ruby-value">id:</span> <span class="ruby-value">23</span>

<span class="ruby-comment"># Assert a basic route (controller + default action), with an error message if it fails</span>
<span class="ruby-identifier">assert_routing</span> <span class="ruby-string">&#39;/store&#39;</span>, { <span class="ruby-value">controller:</span> <span class="ruby-string">&#39;store&#39;</span>, <span class="ruby-value">action:</span> <span class="ruby-string">&#39;index&#39;</span> }, {}, {}, <span class="ruby-string">&#39;Route for store index not generated properly&#39;</span>

<span class="ruby-comment"># Tests a route, providing a defaults hash</span>
<span class="ruby-identifier">assert_routing</span> <span class="ruby-string">&#39;controller/action/9&#39;</span>, {<span class="ruby-value">id:</span> <span class="ruby-string">&quot;9&quot;</span>, <span class="ruby-value">item:</span> <span class="ruby-string">&quot;square&quot;</span>}, {<span class="ruby-value">controller:</span> <span class="ruby-string">&quot;controller&quot;</span>, <span class="ruby-value">action:</span> <span class="ruby-string">&quot;action&quot;</span>}, {}, {<span class="ruby-value">item:</span> <span class="ruby-string">&quot;square&quot;</span>}

<span class="ruby-comment"># Tests a route with a HTTP method</span>
<span class="ruby-identifier">assert_routing</span>({ <span class="ruby-value">method:</span> <span class="ruby-string">&#39;put&#39;</span>, <span class="ruby-value">path:</span> <span class="ruby-string">&#39;/product/321&#39;</span> }, { <span class="ruby-value">controller:</span> <span class="ruby-string">&quot;product&quot;</span>, <span class="ruby-value">action:</span> <span class="ruby-string">&quot;update&quot;</span>, <span class="ruby-value">id:</span> <span class="ruby-string">&quot;321&quot;</span> })
</pre>

<p>See also Minitest::Rails::Expectations#must_route</p>

          <div class="method-source-code" id="assert_routing-source">
            <pre><span class="ruby-comment"># File lib/minitest/rails/assertions/action_view.rb, line 168</span>
  </pre>
          </div>
        </div>


      </div>

      <div id="method-i-assert_select" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              assert_select(*args, &amp;block)
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>An assertion that selects elements and makes one or more equality tests.</p>

<p>If the first argument is an element, selects all matching elements starting from (and including) that element and all its children in depth-first order.</p>

<p>If no element if specified, calling <code>assert_select</code> selects from the response HTML unless <code>assert_select</code> is called from within an <code>assert_select</code> block.</p>

<p>When called with a block <code>assert_select</code> passes an array of selected elements to the block. Calling <code>assert_select</code> from the block, with no element specified, runs the assertion on the complete set of elements selected by the enclosing assertion. Alternatively the array may be iterated through so that <code>assert_select</code> can be called separately for each element.</p>

<h4 id="method-i-assert_select-label-Example">Example<span><a href="#method-i-assert_select-label-Example">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>If the response contains two ordered lists, each with four list elements then:</p>

<pre class="ruby"><span class="ruby-identifier">assert_select</span> <span class="ruby-string">&quot;ol&quot;</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">elements</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">elements</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">element</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">assert_select</span> <span class="ruby-identifier">element</span>, <span class="ruby-string">&quot;li&quot;</span>, <span class="ruby-value">4</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>will pass, as will:</p>

<pre class="ruby"><span class="ruby-identifier">assert_select</span> <span class="ruby-string">&quot;ol&quot;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">assert_select</span> <span class="ruby-string">&quot;li&quot;</span>, <span class="ruby-value">8</span>
<span class="ruby-keyword">end</span>
</pre>

<p>The selector may be a CSS selector expression (String), an expression with substitution values, or an HTML::Selector object.</p>

<h3 id="method-i-assert_select-label-Equality+Tests">Equality Tests<span><a href="#method-i-assert_select-label-Equality+Tests">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>The equality test may be one of the following:</p>
<ul><li>
<p><code>true</code> - Assertion is true if at least one element selected.</p>
</li><li>
<p><code>false</code> - Assertion is true if no element selected.</p>
</li><li>
<p><code>String/Regexp</code> - Assertion is true if the text value of at least one element matches the string or regular expression.</p>
</li><li>
<p><code>Integer</code> - Assertion is true if exactly that number of elements are selected.</p>
</li><li>
<p><code>Range</code> - Assertion is true if the number of selected elements fit the range.</p>
</li></ul>

<p>If no equality test specified, the assertion is true if at least one element selected.</p>

<p>To perform more than one equality tests, use a hash with the following keys:</p>
<ul><li>
<p><code>:text</code> - Narrow the selection to elements that have this text value (string or regexp).</p>
</li><li>
<p><code>:html</code> - Narrow the selection to elements that have this HTML content (string or regexp).</p>
</li><li>
<p><code>:count</code> - Assertion is true if the number of selected elements is equal to this value.</p>
</li><li>
<p><code>:minimum</code> - Assertion is true if the number of selected elements is at least this value.</p>
</li><li>
<p><code>:maximum</code> - Assertion is true if the number of selected elements is at most this value.</p>
</li></ul>

<p>If the method is called with a block, once all equality tests are evaluated the block is called with an array of all matched elements.</p>

<pre class="ruby"><span class="ruby-comment"># At least one form element</span>
<span class="ruby-identifier">assert_select</span> <span class="ruby-string">&quot;form&quot;</span>

<span class="ruby-comment"># Form element includes four input fields</span>
<span class="ruby-identifier">assert_select</span> <span class="ruby-string">&quot;form input&quot;</span>, <span class="ruby-value">4</span>

<span class="ruby-comment"># Page title is &quot;Welcome&quot;</span>
<span class="ruby-identifier">assert_select</span> <span class="ruby-string">&quot;title&quot;</span>, <span class="ruby-string">&quot;Welcome&quot;</span>

<span class="ruby-comment"># Page title is &quot;Welcome&quot; and there is only one title element</span>
<span class="ruby-identifier">assert_select</span> <span class="ruby-string">&quot;title&quot;</span>, {<span class="ruby-value">count:</span> <span class="ruby-value">1</span>, <span class="ruby-value">text:</span> <span class="ruby-string">&quot;Welcome&quot;</span>},
    <span class="ruby-string">&quot;Wrong title or more than one title element&quot;</span>

<span class="ruby-comment"># Page contains no forms</span>
<span class="ruby-identifier">assert_select</span> <span class="ruby-string">&quot;form&quot;</span>, <span class="ruby-keyword">false</span>, <span class="ruby-string">&quot;This page must contain no forms&quot;</span>

<span class="ruby-comment"># Test the content and style</span>
<span class="ruby-identifier">assert_select</span> <span class="ruby-string">&quot;body div.header ul.menu&quot;</span>

<span class="ruby-comment"># Use substitution values</span>
<span class="ruby-identifier">assert_select</span> <span class="ruby-string">&quot;ol&gt;li#?&quot;</span>, <span class="ruby-regexp">/item-\d+/</span>

<span class="ruby-comment"># All input fields in the form have a name</span>
<span class="ruby-identifier">assert_select</span> <span class="ruby-string">&quot;form input&quot;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">assert_select</span> <span class="ruby-string">&quot;[name=?]&quot;</span>, <span class="ruby-regexp">/.+/</span>  <span class="ruby-comment"># Not empty</span>
<span class="ruby-keyword">end</span>
</pre>

<p>See also Minitest::Rails::Expectations#must_select</p>

          <div class="method-source-code" id="assert_select-source">
            <pre><span class="ruby-comment"># File lib/minitest/rails/assertions/action_view.rb, line 261</span>
  </pre>
          </div>
        </div>


      </div>

      <div id="method-i-assert_select_email" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              assert_select_email(&amp;block)
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Extracts the body of an email and runs nested assertions on it.</p>

<p>You must enable deliveries for this assertion to work, use:</p>

<pre class="ruby"> <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">perform_deliveries</span> = <span class="ruby-keyword">true</span>

<span class="ruby-identifier">assert_select_email</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">assert_select</span> <span class="ruby-string">&quot;h1&quot;</span>, <span class="ruby-string">&quot;Email alert&quot;</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">assert_select_email</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">items</span> = <span class="ruby-identifier">assert_select</span> <span class="ruby-string">&quot;ol&gt;li&quot;</span>
  <span class="ruby-identifier">items</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span>
     <span class="ruby-comment"># Work with items here...</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>See also Minitest::Rails::Expectations#must_select_email</p>

          <div class="method-source-code" id="assert_select_email-source">
            <pre><span class="ruby-comment"># File lib/minitest/rails/assertions/action_view.rb, line 282</span>
  </pre>
          </div>
        </div>


      </div>

      <div id="method-i-assert_select_encoded" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              assert_select_encoded(element = nil, &amp;block)
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Extracts the content of an element, treats it as encoded HTML and runs nested assertion on it.</p>

<p>You typically call this method within another assertion to operate on all currently selected elements. You can also pass an element or array of elements.</p>

<p>The content of each element is un-encoded, and wrapped in the root element <code>encoded</code>. It then calls the block with all un-encoded elements.</p>

<pre class="ruby"><span class="ruby-comment"># Selects all bold tags from within the title of an Atom feed&#39;s entries (perhaps to nab a section name prefix)</span>
<span class="ruby-identifier">assert_select</span> <span class="ruby-string">&quot;feed[xmlns=&#39;http://www.w3.org/2005/Atom&#39;]&quot;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-comment"># Select each entry item and then the title item</span>
  <span class="ruby-identifier">assert_select</span> <span class="ruby-string">&quot;entry&gt;title&quot;</span> <span class="ruby-keyword">do</span>
    <span class="ruby-comment"># Run assertions on the encoded title elements</span>
    <span class="ruby-identifier">assert_select_encoded</span> <span class="ruby-keyword">do</span>
      <span class="ruby-identifier">assert_select</span> <span class="ruby-string">&quot;b&quot;</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>

<span class="ruby-comment"># Selects all paragraph tags from within the description of an RSS feed</span>
<span class="ruby-identifier">assert_select</span> <span class="ruby-string">&quot;rss[version=2.0]&quot;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-comment"># Select description element of each feed item.</span>
  <span class="ruby-identifier">assert_select</span> <span class="ruby-string">&quot;channel&gt;item&gt;description&quot;</span> <span class="ruby-keyword">do</span>
    <span class="ruby-comment"># Run assertions on the encoded elements.</span>
    <span class="ruby-identifier">assert_select_encoded</span> <span class="ruby-keyword">do</span>
      <span class="ruby-identifier">assert_select</span> <span class="ruby-string">&quot;p&quot;</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>See also Minitest::Rails::Expectations#must_select_encoded</p>

          <div class="method-source-code" id="assert_select_encoded-source">
            <pre><span class="ruby-comment"># File lib/minitest/rails/assertions/action_view.rb, line 320</span>
  </pre>
          </div>
        </div>


      </div>

      <div id="method-i-refute_difference" class="method-detail method-alias">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">refute_difference</span><span
              class="method-args">()</span>
          </div>
        </div>

        <div class="method-description">
          <p>Checks that the numeric result of evaluating an expression is not changed before and after invoking.</p>

<pre>refute_difference &quot;User.count&quot;, do
  User.new
end</pre>

<p>See also Minitest::Rails::Expectations#wont_change</p>

<p>:args: expression, message = nil, &amp;block</p>

        </div>


        <div class="aliases">
          Alias for: <a href="TestCase.html#method-i-assert_no_difference">assert_no_difference</a>
        </div>
      </div>

      <div id="method-i-refute_dom_equal" class="method-detail method-alias">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">refute_dom_equal</span><span
              class="method-args">()</span>
          </div>
        </div>

        <div class="method-description">
          <p>Checks that two HTML strings are not equivalent. That they do not contain the same elements and attributes with the associated values.</p>

<pre class="ruby"><span class="ruby-identifier">refute_dom_equal</span> <span class="ruby-string">&#39;&lt;a href=&quot;http://www.example.com&quot;&gt;Oranges&lt;/a&gt;&#39;</span>,
                 <span class="ruby-identifier">link_to</span>(<span class="ruby-string">&quot;Apples&quot;</span>, <span class="ruby-string">&quot;http://www.example.com&quot;</span>)
</pre>

<p>See also Minitest::Rails::Expectations#wont_dom_equal</p>

<p>:method: <a href="TestCase.html#method-i-assert_dom_equal"><code>assert_dom_equal</code></a> :call-seq: <a href="TestCase.html#method-i-assert_dom_equal"><code>assert_dom_equal</code></a>(expected, actual, message = nil)</p>

        </div>


        <div class="aliases">
          Alias for: <a href="TestCase.html#method-i-assert_dom_not_equal">assert_dom_not_equal</a>
        </div>
      </div>

    </section>

  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.5.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

